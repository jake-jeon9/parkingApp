<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.regularMapper">
	<!-- regular -->
	<!-- regular insert -->
	<insert id="regularInsert" parameterType="regularDTO" useGeneratedKeys="true" keyColumn="regularNo,memberNo" keyProperty="regularNo,memberNo">
		INSERT INTO REGULAR 
		VALUES     (seq_regular.nextval, 
		            #{memberNo}, 
		            #{plateNumOfCar}, 
		            #{guestName},
		            #{guestContact},
		            sysdate,
		            add_months(sysdate,#{expireOfDate}),
		            0,
		            #{paid},
		            0)
	</insert>
	<!-- regular modify -->
	<update id="regularModify" parameterType="regularDTO" >
		UPDATE REGULAR 
		SET    plateNumOfCar = #{plateNumOfCar}, 
		       guestName = #{guestName}, 
		       guestContact = #{guestContact},
			   expireOfDate = #{expireOfDate},
			   countOfextend = #{countOfextend},
			   paid = #{paid}
		WHERE  regularNo = #{regularNo} 
	</update>
	
	<!-- update count -->
	<update id="regularUpdate" parameterType="int" >
		UPDATE REGULAR 
		SET 	usedCount = usedCount+1
		WHERE	regularNo = 2;
	</update>
	
	<!-- delete regular -->
	<delete id="regularDelete" parameterType="int">
		DELETE FROM REGULAR 
		WHERE  regularNo = #{regularNo}
	</delete>
	
	<!-- list regular -->
	<select id="regularSelect" parameterType="int" resultType="regularDTO">
		SELECT * FROM REGULAR
		WHERE regularNo = #{regularNo}
	</select>
	
</mapper>